@model Lustrious.Models.Produto
@{
 ViewData["Title"] = "Editar Produto";
}
<h2>Editar Produto</h2>
<form asp-action="EditarProduto" method="post" enctype="multipart/form-data">
 <input type="hidden" name="CodigoBarras" value="@Model.CodigoBarras" />
 <div>
 <label>Nome</label>
 <input type="text" name="NomeProd" value="@Model.NomeProd" />
 </div>
 <div>
 <label>Quantidade</label>
 <input type="number" name="Qtd" value="@Model.Qtd" />
 </div>
 <div>
 <label>Genero</label>
 <input type="text" name="Genero" value="@Model.Genero" />
 </div>
 <div>
 <label>Descrição</label>
 <textarea name="Descricao">@Model.Descricao</textarea>
 </div>
 <div>
 <label>Valor Unitário</label>
 <input type="number" step="0.01" name="ValorUnitario" value="@Model.ValorUnitario" />
 </div>
 <div>
 <label>Foto</label>
 <input type="file" name="foto" id="fotoInput" accept="image/*" />
 <div style="margin-top:8px;">
 <img id="fotoPreview" src="@(string.IsNullOrWhiteSpace(Model?.Foto) ? Url.Content("~/imagens/capa_foto.png") : Url.Content("~/" + Model.Foto))" style="max-width:160px;max-height:160px;object-fit:cover;border-radius:6px;border:2px solid #ddd;" />
 </div>
 </div>
 <div style="margin-top:10px;">
 <button type="submit">Salvar</button>
 <a href="/Produto">Cancelar</a>
 </div>
</form>

@section Scripts{
 <script>
 (function(){
 var input = document.getElementById('fotoInput');
 var preview = document.getElementById('fotoPreview');
 if(!input) return;
 input.addEventListener('change', function(){
 var file = input.files && input.files[0];
 if(!file) return;
 var reader = new FileReader();
 reader.onload = function(ev){ preview.src = ev.target.result; };
 reader.readAsDataURL(file);
 });
 })();
 </script>
}
